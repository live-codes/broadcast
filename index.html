 <!DOCTYPE HTML>
<html>
  <head>
    <title> LiveCodes Broadcast </title>
    <meta name = "charset" charset = "utf-8">
    <meta name = "viewport" content = "width=device-width">
    <style>
      html, body {
        position: relative;
        margin: 0;
        padding: 0;
        overflow: hidden;
        width: 100vw;
        height: 100vh;
      }
      
      #result {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 0;
      }
    </style>
    <script src= "https://cdn.jsdelivr.net/npm/socket.io-client@4.5.1/dist/socket.io.min.js"></script>
  </head>
  <body>
    <iframe 
      id="result"
      sandbox="allow-same-origin allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts"
    ></iframe>
<script>
addEventListener('load', () => {
  const iframe = document.getElementById("result");
  const showResult = (result) => {
    iframe.srcdoc = result; 
  }
  
  const socket = io();

  socket.on("join", function(lastResult){
    showResult(lastResult);
  })

  socket.on("recieve", function(result){
    showResult(result);
  })

  const channel = location.href.split("/").slice(-1)[0];
  socket.emit("join", channel);
});
  
</script>
  </body>
</html>